# История разработки

Правило: хранить только последние 10 записей. При добавлении новой переносить старые в
`agent_docs/development-history-archive.md`. Архив читать при необходимости.

---

Краткий журнал итераций проекта.

## Записи

### 2026-01-23: Команда convert-video-md — Шаг 7 автоматически, документ с шагами 7.1–7.4

**Задача:** Сделать Шаг 7 (приведение MD к стандарту) частью автоматического процесса convert-video-md, без запроса пользователю; подготовить справочный документ с последовательностью шагов.

**Выполнено:**
- **Команда `.cursor/commands/convert-video-md.md`:** Шаг 7 выполняется сразу после Шагов 4–6, без запроса. Для каждого созданного MD агент готовит полный документ по 7.1–7.4 (метаданные, целевая аудитория, краткое описание, правки распознавания, структура, при необходимости — доп. скриншоты и чек-листы, история изменений, финальная проверка). Блок «Важно: После конвертации» заменён на «Шаг 7 выполняется автоматически» с отсылкой к `agent_docs/convert-video-step7.md`.
- **Документ `agent_docs/convert-video-step7.md`:** Последовательность 7.1→7.2→7.3→7.4 и чек-лист финальной проверки для агента.
- **`agent_docs/index.md`:** Добавлена ссылка на `convert-video-step7.md` в разделе «Дополнительные».

**Результат:** При запуске convert-video-md Шаг 7 выполняется по умолчанию; справочник шагов — в `agent_docs/convert-video-step7.md`.

---

### 2026-01-23: Анализ и обновление структуры базы знаний, инструкций и шаблонов

**Задача:** Проанализировать обновленную структуру базы знаний, все входящие документы и внести соответствующие изменения в инструкции, шаблоны, README файлы и AGENTS.md, которые соответствуют текущей версии базы знаний.

**Выполнено:**
- **Анализ структуры:** Изучена полная структура базы знаний, включая все разделы (ОП, ОС, Тех. поддержка, Маркетинг, О компании, Стратегия 2026) и подразделы. Проанализированы примеры документов для понимания текущих стандартов оформления.
- **Обновление инструкции по работе с базой знаний (`agent_docs/Инструкция по работе с базой знаний.md`):**
  - Добавлена информация о новых разделах: Маркетинг, О компании, Стратегия 2026
  - Обновлен раздел "Структура базы знаний" с полным списком разделов
  - Добавлен тип документа "Справочник" и "Стратегический документ"
  - Обновлен раздел "Стандарты оформления документов" с обязательной структурой документа согласно шаблону
  - Добавлено правило обновления README файлов при изменении документов
- **Обновление шаблона статьи (`agent_docs/Шаблон статьи базы знаний.md`):**
  - Добавлены новые отделы в метаданные: Маркетинг, О компании, Стратегия 2026
  - Добавлен тип документа "Стратегический документ"
  - Добавлены рекомендации по заполнению для стратегических документов
- **Обновление README файлов:**
  - **Главный README базы знаний (`База знаний/README.md`):** Добавлен раздел "Стратегия 2026" с описанием и ссылкой на README раздела
  - **README раздела Тех. поддержка (`База знаний/Тех. поддержка/README.md`):** Добавлена информация о подразделах PASS24.AI и Облако PASS24.cloud
- **Обновление AGENTS.md:**
  - Обновлено описание использования базы знаний с указанием всех разделов
  - Уточнено правило обновления README для всех разделов, включая новые
  - Добавлены детали по обязательным разделам метаданных при создании документов
  - Добавлено указание на использование разделителей `---` для визуального разделения блоков

**Результат:** Все инструкции, шаблоны, README файлы и AGENTS.md приведены в соответствие с текущей структурой базы знаний. Документация отражает актуальное состояние всех разделов: ОП, ОС, Тех. поддержка, Маркетинг, О компании, Стратегия 2026.

---

### 2026-01-22: Корректировка и приведение к шаблону модулей «Инструкции по WEB»

**Задача:** Обработать все MD-файлы в папке «Инструкции по WEB» по шагу 7 команды convert-video-md: исправление ошибок распознавания, добавление структуры по шаблону базы знаний, пошаговые инструкции, чек-листы, история изменений.

**Выполнено:**
- **9 модулей** (Адреса, Доверенности, Запросы, Объекты, Права, Пользователи, Пропуска, Рассылка, Сотрудники): исправлены типичные ошибки распознавания (PAST24→PASS24, моторм→модуле, боковом минимум→меню, ведите→введите, мёчество→отчество, опинтерфейсе→в интерфейсе и т.д.). Убраны «Полный текст транскрипции» и «Сегменты с временными метками»; добавлены метаданные, целевая аудитория, краткое описание, пошаговая инструкция со скриншотами, контрольный чек-лист, типичные ошибки и решение, связанные материалы, история изменений. Скриншоты оставлены в `screenshots/`, ссылки вида `screenshots/...` сохранены.
- **Переименования:** «Модуль _Доверенности_ (1)» → «Модуль Доверенности», «Модуль _Объекты_ (1)» → «Модуль Объекты», «Модуль _Рассылка_ (1)» → «Модуль Рассылка», «Модуль 'Права' (1)» → «Модуль Права». Старые файлы удалены.
- **README «Инструкции PASS24.online»:** добавлен подраздел «Инструкции по веб-интерфейсу (модули PASS24.online)» с таблицей из 9 документов и назначением; обновлён блок «Видеоинструкции» (Инструкции по WEB — текстовые инструкции, скриншоты, видео -converted).

**Результат:** Все модули в «Инструкции по WEB» приведены к шаблону базы знаний и готовы к использованию; README отражает актуальную структуру.

---

### 2026-01-22: Команда convert-video-md — всё в рабочей директории

**Задача:** Гарантировать, что конвертация видео в MD выполняется только в директории с видео; ни один результат не сохраняется в другие папки; `screenshots/` — вложенная папка рабочей директории.

**Выполнено:**
- **Скрипт `scripts/convert_video_to_md.py`:** Убрана запись в «Мобильное приложение». MD-файлы, переименованные видео и папка `screenshots/` создаются только в папке с обрабатываемым видео (`video_path.parent`). Скриншоты — в `video_dir/screenshots/`.
- **Команда `.cursor/commands/convert-video-md.md`:** Описание структуры переписано: рабочая директория = папка с видео; все результаты только в ней; `screenshots/` вложена. Удалены упоминания «Мобильное приложение». В `.gitignore` — только `*.mp4` и `*-converted.mp4`, не вся папка. В Шаг 1 добавлено явное указание про рабочую директорию.

**Результат:** Команда и скрипт соответствуют требованию: работа только в указанной директории, все файлы и результаты внутри неё, `screenshots` — вложенная папка.

---

### 2026-01-21: Переработка документов ОС и Бухгалтерии (удаление Teamly, перенос контента)

**Задача:** Убрать упоминания Teamly, перенести контент из внешних источников в документы базы знаний, переименовать разделы, обновить README.

**Выполнено:**
- **ОС (4 документа):** Процесс повышения АП; Карта подключенных объектов; Процесс расторжения и приостановки договора; Реестр подключенных объектов (облако). Раздел «Ссылка на процесс в Teamly» переименован в «Основной контент»; обновлены краткое описание, метаданные (версия 1.1), история изменений; таблицы метаданных приведены к компактному виду.
- **Бухгалтерия (3 документа):** Регламент по обработке документов в ЭДО; Автоматическая отправка счетов и актов через 1С; Согласование и подписание документов. Аналогичные правки; в ЭДО — битая ссылка на Реестр регулярных платежей заменена на отсылку к корпоративному диску Б24; в 1С — удалён блок «В Teamly находятся».
- **Внутренние ссылки:** в Реестре (облако) ссылка на teamly.ru заменена на [Процесс расторжения и приостановки договора]; в Карте — отсылка к [Реестр подключенных объектов (облако)].
- **README ОС и Бухгалтерии:** убраны упоминания Teamly; описания четырёх (ОС) и трёх (Бухгалтерия) документов переписаны («Содержит: …»); в порядке изучения ОС «Процессы в Teamly» заменено на «Регламенты»; в Бухгалтерии — «При изменении процессов в Teamly» на «При изменении регламентов и процессов».

**Результат:** Регламенты ОС и Бухгалтерии самодостаточны; контент находится в базе знаний, внешние отсылки на Teamly удалены.

---

### 2026-01-20: Добавлены функции сопровождения (ОС) и бухгалтерии (О компании)

**Задача:** Задокументировать процессы и регламенты отдела сопровождения и бухгалтерии со ссылками на Teamly.

**Выполнено:**
- **ОС (4 документа):** Процесс повышения АП для действующих клиентов с уведомлением; Карта подключенных объектов; Процесс расторжения и приостановки договора с клиентом; Реестр подключенных объектов (облако). В каждом — метаданные, целевая аудитория, краткое описание и ссылка на процесс в Teamly.
- **Бухгалтерия (О компании):** Создан подраздел «Бухгалтерия» с README и 3 документами: Регламент по обработке документов в ЭДО; Автоматическая отправка счетов и актов через 1С клиентам; Согласование и подписание документов в компании. Ссылки на регламенты/процессы в Teamly.
- Обновлён README ОС (добавлены 4 новых документа, порядок изучения).
- Создан README раздела «О компании» (Бухгалтерия, Административные процедуры).
- Обновлён корневой README «База знаний» (добавлен блок «О компании»).

**Результат:** Сотрудники могут находить в базе знаний навигацию по процессам ОС и бухгалтерии и переходить по ссылкам в Teamly для пошаговых инструкций.

---

### 2026-01-20: Конвертация PDF в MD в разделе Тех. поддержка

**Задача:** Конвертировать все PDF в разделе «Тех. поддержка» в MD-статьи по стандарту базы знаний, удалить исходные PDF и обновить общие файлы.

**Выполнено:**
- Конвертировано 46 PDF в MD по шаблону (метаданные, целевая аудитория, краткое описание, основной контент, связанные материалы, история изменений)
- Удалены все исходные PDF в подразделах: Инструкции CVS, ivideon, PASS24.control, PASS24.online, ZKTeco, Интеграция Dahua, Sigur, в корне — «Интеграция с Автомаршал»
- Добавлены README в: Инструкции CVS, ivideon, PASS24.control, PASS24.online, ZKTeco, Интеграция Dahua, Sigur
- Обновлён README раздела «Тех. поддержка»: блоки «Интеграции и партнёрское ПО», «Инструкции по продуктам и оборудованию», PASS24.AI; расширен рекомендуемый порядок изучения
- Обновлён корневой README «База знаний» (описание состава Тех. поддержки, дата)

**Результат:** Инструкции и справочники по продуктам и интеграциям доступны в едином формате MD, навигация обеспечена через README подразделов и раздела.

---

### 2026-01-20: Настройка GitHub репозитория и первый коммит

**Задача:** Подключить локальную базу знаний к новому GitHub репозиторию и настроить систему коммитов.

**Выполнено:**
- Отвязан старый remote (`akhromov-ai/pass24-knowlege-base`)
- Привязан новый remote (`akhromovRT/pass24-knowlege-base`)
- Очищены старые credentials из Keychain
- Выполнен первый коммит с полной базой знаний (40 файлов, 7994 строк)
- Настроен tracking ветки `main` на `origin/main`
- Выполнен force push для замены удалённой истории

**Технические детали:**
- Использован Personal Access Token для авторизации
- Токен удалён из URL после успешного push для безопасности
- Настроен credential helper `osxkeychain` для macOS

**Результат:** Репозиторий успешно подключён, все файлы базы знаний загружены на GitHub.